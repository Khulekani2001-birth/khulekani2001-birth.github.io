<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request Tutor Â· MiltonLearn</title>
    <meta name="description" content="MiltonLearn is reshaping education through AI-powered personalized tutoring. Experience the future of learning with our innovative educational solutions.">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E4Y24C156P"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'G-E4Y24C156P');
    </script>
    <!-- Styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="logo.png">
    <link rel="stylesheet" href="css/style.css">
  </head>

<body class="d-flex flex-column">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="/index.html">
        <img src="logo.png" alt="MiltonLearn Logo">
        <span class="brand-text">MiltonLearn</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
              <i class="bi bi-grid me-2"></i>Learning Solutions
            </a>
            <ul class="dropdown-menu">
              <li>
                <a class="dropdown-item" href="/request_tutor.html">
                  <i class="bi bi-person-video3 me-2 text-success"></i>
                  <strong>1-on-1 Tutoring</strong><br>
                  <small class="text-muted">Expert human guidance</small>
                </a>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item" href="https://www.mamtutor.com" target="_blank">
                  <i class="bi bi-robot me-2 text-primary"></i>
                  <strong>MAMTutor AI</strong><br>
                  <small class="text-muted">24/7 AI learning assistant</small>
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="https://examease.miltonlearn.com" target="_blank">
                  <i class="bi bi-journal-check me-2 text-info"></i>
                  <strong>ExamEase</strong><br>
                  <small class="text-muted">Smart exam preparation</small>
                </a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-semibold" href="/pricing.html">Pricing</a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-semibold" href="/shop.html">Shop</a>
          </li>
          <li class="nav-item">
            <a class="nav-link fw-semibold" href="/about.html">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link btn btn-success text-white px-3 ms-2" href="/request_tutor.html">
              <i class="bi bi-person-plus me-1"></i>Get Started
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
    
    <style>
    .dropdown:hover .dropdown-menu {
      display: block;
    }
    
    /* Optional: Add a small delay to prevent accidental triggering */
    .dropdown-menu {
      margin-top: 0;
      transition: all 0.2s;
    }

    .pricing-highlight {
      background: linear-gradient(135deg, #28a745, #20c997);
      color: white;
      padding: 2rem;
      border-radius: 15px;
      margin: 2rem 0;
      text-align: center;
      box-shadow: 0 10px 30px rgba(40, 167, 69, 0.3);
    }

    .pricing-highlight h3 {
      font-weight: 700;
      margin-bottom: 1rem;
    }

    .pricing-highlight .lead {
      font-size: 1.1rem;
      margin-bottom: 1.5rem;
      opacity: 0.95;
    }

    .savings-badge {
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.3);
      padding: 0.5rem 1rem;
      border-radius: 25px;
      display: inline-block;
      margin-top: 1rem;
      font-weight: 600;
    }

    /* ADDED: Minimal completion tracking styles */
    .completion-indicator {
      background: rgba(40, 167, 69, 0.1);
      border: 1px solid rgba(40, 167, 69, 0.3);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1.5rem;
      text-align: center;
    }
    
    .completion-text {
      color: #28a745;
      font-weight: 600;
      margin: 0;
    }
    
    .field-check {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #28a745;
      font-size: 1.1rem;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 5;
    }
    
    .field-check.show {
      opacity: 1;
    }
    
    .form-group {
      position: relative;
    }
    
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .missing-fields-alert {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      color: #856404;
      padding: 0.75rem 1rem;
      border-radius: 6px;
      margin-bottom: 1rem;
      display: none;
      font-size: 0.9rem;
    }
    
    .missing-fields-alert.show {
      display: block;
    }
    
    .auto-save {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(40, 167, 69, 0.9);
      color: white;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 1000;
    }
    
    .auto-save.show {
      opacity: 1;
    }
    </style>

  <section class="py-4">
    <div class="container">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-10 form-container" id="tutorFormCard">
            <div class="pricing-plans text-center mb-5">
              <h2>Fill the form below to request a tutor</h2>
              <p>Choose from our range of tutoring packages designed to fit your needs.</p>
              
              <!-- Pricing Highlight Section -->
              <div class="pricing-highlight">
                <h3><i class="bi bi-lightning-charge me-2"></i>Sessions Start From R150/hr</h3>
                
                <a href="pricing.html" class="btn btn-light btn-lg mt-3">
                  <i class="bi bi-eye me-2"></i>View All Package Details
                </a>
              </div>

              <p>When facing challenges Call/WhatsApp <a href="tel:+2687840455">+268 7840 4553</a> or <a href="tel:+27839678191">+27 83 967 8191</a>, or email <a href="mailto:info@miltonlearn.com">info@miltonlearn.com</a>.</p>
              <div class="alert alert-info">
                <strong>Note for students outside South Africa and Eswatini:</strong> To request a tutorial please email <a href="mailto:milton@miltonlearn.com" target="_blank">milton@miltonlearn.com</a> to get relevant information. 
              </div>
            </div>

            <!-- ADDED: Completion indicator -->
            <div class="completion-indicator">
              <p class="completion-text" id="completionText">Complete all required fields to submit your request</p>
            </div>
            
            <!-- ADDED: Missing fields alert -->
            <div class="missing-fields-alert" id="missingFieldsAlert">
              <strong>Please complete:</strong> <span id="missingFieldsList"></span>
            </div>

            <form id="tutorForm" class="row g-3 needs-validation" novalidate onsubmit="return false;">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="parentName" class="form-label">Parent/Guardian Full Name <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="parentName" name="parentName" required>
                  <i class="bi bi-check-circle-fill field-check" id="parentName-check"></i>
                  <div class="invalid-feedback">
                    Please provide the parent/guardian's full name.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="studentName" class="form-label">Student Full Name <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="studentName" name="studentName" required>
                  <i class="bi bi-check-circle-fill field-check" id="studentName-check"></i>
                  <div class="invalid-feedback">
                    Please provide the student's full name.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="email" class="form-label">Email</label>
                  <input type="email" class="form-control" id="email" name="email">
                  <i class="bi bi-check-circle-fill field-check" id="email-check"></i>
                  <div class="invalid-feedback">
                    Please provide a valid email address.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="parentNumber" class="form-label">Parent Phone Number (Please include country code) <span class="text-danger">*</span></label>
                  <input type="tel" class="form-control" id="parentNumber" name="parentNumber" required>
                  <i class="bi bi-check-circle-fill field-check" id="parentNumber-check"></i>
                  <div class="invalid-feedback">
                    Please provide the parent's phone number.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="studentNumber" class="form-label">Student Phone Number (Please include country code)</label>
                  <input type="tel" class="form-control" id="studentNumber" name="studentNumber">
                  <i class="bi bi-check-circle-fill field-check" id="studentNumber-check"></i>
                  <div class="invalid-feedback">
                    Please provide the student's phone number.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="parentOrStudent" class="form-label">Are you a parent or student? <span class="text-danger">*</span></label>
                  <select class="form-select" id="parentOrStudent" name="parentOrStudent" required>
                    <option value="" disabled selected>Select below</option>
                    <option value="Parent">Parent</option>
                    <option value="Student">Student</option>
                    <option value="Other">Other</option>
                  </select>
                  <i class="bi bi-check-circle-fill field-check" id="parentOrStudent-check"></i>
                  <div class="invalid-feedback">
                    Please select whether you are a parent or student.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="meetingLocation" class="form-label">Meeting Location <span class="text-danger">*</span></label>
                  <select class="form-select" id="meetingLocation" name="meetingLocation" required>
                    <option value="Online" selected>Online (Zoom, Teams, or Google Meet)</option>
                  </select>
                  <i class="bi bi-check-circle-fill field-check" id="meetingLocation-check"></i>
                  <div class="invalid-feedback">
                    Please select your meeting location.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="day" class="form-label">Day <span class="text-danger">*</span></label>
                  <select class="form-select" id="day" name="day" required>
                    <option value="" disabled selected>Select a day</option>
                    <option value="Monday">Monday</option>
                    <option value="Tuesday">Tuesday</option>
                    <option value="Wednesday">Wednesday</option>
                    <option value="Thursday">Thursday</option>
                    <option value="Friday">Friday</option>
                    <option value="Saturday">Saturday</option>
                    <option value="Sunday">Sunday</option>
                  </select>
                  <i class="bi bi-check-circle-fill field-check" id="day-check"></i>
                  <div class="invalid-feedback">
                    Please select a day.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="level" class="form-label">Level of Study <span class="text-danger">*</span></label>
                  <select class="form-select" id="level" name="level" required>
                    <option value="" disabled selected>Select your level of study</option>
                    <option value="Grade 7">Grade 7</option>
                    <option value="Grade 8">Grade 8 /Form 1</option>
                    <option value="Grade 9">Grade 9 / Form 2</option>
                    <option value="Grade 10">Grade 10 / Form 3</option>
                    <option value="Grade 11">Grade 11 / Form 4</option>
                    <option value="Grade 12">Grade 12 / Form 5 / IGCSE / IEB / NSC</option>
                    <option value="AS Level">AS Level</option>
                    <option value="A Level">A Level</option>
                    <option value="Other Grade">Other (Please specify under Additional Info)</option>
                  </select>
                  <i class="bi bi-check-circle-fill field-check" id="level-check"></i>
                  <div class="invalid-feedback">
                    Please select your level of study.
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="subject" class="form-label">Subject <span class="text-danger">*</span></label>
                  <select class="form-select" id="subject" name="subject" required>
                    <option value="" disabled selected>Select a subject</option>
                    <option value="Biology">Biology</option>
                    <option value="Chemistry">Chemistry</option>
                    <option value="Computer Science">Computer Science</option>
                    <option value="Economics">Economics</option>
                    <option value="Information Communication Technology">Information Communication Technology</option>
                    <option value="Mathematics">Mathematics</option>
                    <option value="Physics">Physics</option>
                  </select>
                  <i class="bi bi-check-circle-fill field-check" id="subject-check"></i>
                  <div class="invalid-feedback">
                    Please select a subject.
                  </div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label for="package" class="form-label">Select Package <span class="text-danger">*</span></label>
                  <select class="form-select" id="package" name="package" required>
                    <option value="" disabled selected>Choose a pricing package</option>
                    <option value="Starter">Starter Package - R500/month (R125/hr, 4 sessions)</option>
                    <option value="Basic">Basic Package - R750/month (R125/hr, 6 sessions)</option>
                    <option value="Standard">Standard Package - R1200/month (R100/hr, 12 sessions)</option>
                    <option value="Premium">Premium Package - R1800/month (R90/hr, 20 sessions)</option>
                    <option value="PayAsYouGo">Pay-As-You-Go - R150/hour (Flexible scheduling)</option>
                  </select>
                  <i class="bi bi-check-circle-fill field-check" id="package-check"></i>
                  <div class="invalid-feedback">
                    Please select a package.
                  </div>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label for="details" class="form-label">Additional Info</label>
                  <textarea class="form-control" id="details" name="details" rows="3" placeholder="Tell us about your learning goals, specific topics you need help with, or any special requirements..."></textarea>
                  <div class="invalid-feedback">
                    Please provide additional information.
                  </div>
                </div>
              </div>
              <div class="col-12 text-center mt-4">
                <button type="submit" class="btn btn-primary btn-lg" id="submitBtn" disabled>
                  <i class="bi bi-send me-2"></i>Request Tutor
                </button>
              </div>
            </form>
            <div id="loading" class="spinner-border text-primary mt-3" role="status" style="display: none;">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
        </div>
      </div>
    </br>
  </section>
  
  <!-- ADDED: Auto-save indicator -->
  <div class="auto-save" id="autoSave">
    <i class="bi bi-check-circle me-1"></i>Progress saved
  </div>

  <!-- Footer -->
  <footer class="mt-auto">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-6 text-center text-md-start">
          <h5 class="mb-3">Contact Us</h5>
          <p class="mb-2">
            <i class="bi bi-telephone me-2"></i>
            <a href="tel:+26878404553">+268 7840 4553</a>
          </p>
          <p class="mb-0">
            <i class="bi bi-envelope me-2"></i>
            <a href="mailto:info@miltonlearn.com">info@miltonlearn.com</a>
          </p>
        </div>
        <div class="col-md-6 text-center text-md-end">
          <h5 class="mb-3">Follow Us</h5>
          <div class="social-links">
            <a href="https://www.facebook.com/miltonlearn/" target="_blank">
              <i class="bi bi-facebook"></i>
            </a>
            <a href="https://www.instagram.com/miltonlearn/" target="_blank">
              <i class="bi bi-instagram"></i>
            </a>
            <a href="https://www.linkedin.com/company/miltonlearn" target="_blank">
              <i class="bi bi-linkedin"></i>
            </a>
          </div>
        </div>
      </div>
      <hr class="my-4">
      <p class="text-center mb-0">
        Â© <span id="current-year"></span> MiltonLearn. All rights reserved.
      </p>
    </div>
  </footer>

  <div id="successModal" class="custom-modal">
    <div class="custom-modal-content">
      <span class="custom-modal-close" aria-label="Close modal">&times;</span>
      <div class="success-icon">
        <i class="bi bi-check-circle-fill"></i>
      </div>
      <h2>Request Submitted!</h2>
      <p>Your tutor request has been successfully sent. Our team will contact you within 24 hours to discuss the next steps.</p>
    </div>
  </div>
  
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- EmailJS -->
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>

  <script>
    // Initialize EmailJS
    (function(){
      emailjs.init("JR2sVi6C36Fta6Ddr");
    })();

    // Set current year in footer and clean URL
    document.addEventListener('DOMContentLoaded', function() {
      const currentYearElement = document.getElementById('current-year');
      if (currentYearElement) {
        currentYearElement.textContent = new Date().getFullYear();
      }

      // Clean URL parameters if they exist
      if (window.location.search) {
        const cleanUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
        window.history.replaceState({}, document.title, cleanUrl);
      }
    });

    // ADDED: Form completion tracking
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('tutorForm');
      const submitBtn = document.getElementById('submitBtn');
      const completionText = document.getElementById('completionText');
      const missingFieldsAlert = document.getElementById('missingFieldsAlert');
      const missingFieldsList = document.getElementById('missingFieldsList');
      const autoSave = document.getElementById('autoSave');
      
      // Get all required fields
      const requiredFields = form.querySelectorAll('[required]');
      let autoSaveTimeout;
      
      // Check completion status
      function checkCompletion() {
        const completedFields = Array.from(requiredFields).filter(field => {
          return field.value.trim() !== '' && field.checkValidity();
        });
        
        const totalRequired = requiredFields.length;
        const completed = completedFields.length;
        const isComplete = completed === totalRequired;
        
        // Update completion text
        if (isComplete) {
          completionText.textContent = `â All required fields completed! Ready to submit.`;
          completionText.style.color = '#28a745';
          submitBtn.disabled = false;
          missingFieldsAlert.classList.remove('show');
        } else {
          completionText.textContent = `${completed} of ${totalRequired} required fields completed`;
          completionText.style.color = '#856404';
          submitBtn.disabled = true;
          
          // Show missing fields
          const missingFields = Array.from(requiredFields)
            .filter(field => field.value.trim() === '' || !field.checkValidity())
            .map(field => field.previousElementSibling.textContent.replace(' *', ''));
          
          if (completed > 0 && missingFields.length > 0) {
            missingFieldsList.textContent = missingFields.join(', ');
            missingFieldsAlert.classList.add('show');
          }
        }
        
        // Update field check icons
        requiredFields.forEach(field => {
          const checkIcon = document.getElementById(field.id + '-check');
          if (checkIcon) {
            if (field.value.trim() !== '' && field.checkValidity()) {
              checkIcon.classList.add('show');
            } else {
              checkIcon.classList.remove('show');
            }
          }
        });
      }
      
      // Auto-save function
      function autoSaveProgress() {
        const formData = new FormData(form);
        const data = {};
        for (let [key, value] of formData.entries()) {
          data[key] = value;
        }
        localStorage.setItem('tutorFormData', JSON.stringify(data));
        
        // Show auto-save indicator
        autoSave.classList.add('show');
        setTimeout(() => autoSave.classList.remove('show'), 2000);
      }
      
      // Load saved data
      function loadSavedData() {
        const saved = localStorage.getItem('tutorFormData');
        if (saved) {
          try {
            const data = JSON.parse(saved);
            Object.keys(data).forEach(key => {
              const field = document.getElementById(key);
              if (field && data[key]) {
                field.value = data[key];
              }
            });
            checkCompletion();
          } catch (e) {
            console.error('Error loading saved data:', e);
          }
        }
      }
      
      // Add event listeners to all form fields
      const allFields = form.querySelectorAll('input, select, textarea');
      allFields.forEach(field => {
        field.addEventListener('input', () => {
          checkCompletion();
          
          // Auto-save with debounce
          clearTimeout(autoSaveTimeout);
          autoSaveTimeout = setTimeout(autoSaveProgress, 2000);
        });
        
        field.addEventListener('change', checkCompletion);
      });
      
      // Load saved data on page load
      loadSavedData();
      
      // Initial check
      checkCompletion();
    });

    // Original form validation and submission
    document.addEventListener('DOMContentLoaded', function() {
      'use strict';

      const form = document.getElementById('tutorForm');
      const loadingSpinner = document.getElementById('loading');
      
      if (!form) {
        console.error('Form not found');
        return;
      }

      form.addEventListener('submit', function (event) {
        event.preventDefault();
        event.stopPropagation();
        event.stopImmediatePropagation();
        
        console.log('Form submitted');
        
        if (form.checkValidity()) {
          console.log('Form is valid, sending email...');
          sendEmail();
        } else {
          console.log('Form is invalid');
          form.classList.add('was-validated');
        }
        
        return false; // Extra prevention
      }, false);

      function sendEmail() {
        if (loadingSpinner) {
          loadingSpinner.style.display = 'block';
        }
        
        // Get form values
        const templateParams = {
          studentName: document.getElementById('studentName')?.value || '',
          parentName: document.getElementById('parentName')?.value || '',
          reply_to: document.getElementById('email')?.value || '',
          parentNumber: document.getElementById('parentNumber')?.value || '',
          studentNumber: document.getElementById('studentNumber')?.value || '',
          day: document.getElementById('day')?.value || '',
          level: document.getElementById('level')?.value || '',
          subject: document.getElementById('subject')?.value || '',
          details: document.getElementById('details')?.value || '',
          parentOrStudent: document.getElementById('parentOrStudent')?.value || '',
          package: document.getElementById('package')?.value || '',
          meetingLocation: document.getElementById('meetingLocation')?.value || ''
        };
        
        console.log('Template params:', templateParams);
        
        // Send email using EmailJS
        emailjs.send('service_jytz61d', 'template_kjcid8m', templateParams)
          .then(function(response) {
            console.log('Email sent successfully:', response);
            if (loadingSpinner) {
              loadingSpinner.style.display = 'none';
            }
            showSuccessModal();
            form.reset();
            form.classList.remove('was-validated');
            
            // Clear saved data on successful submission
            localStorage.removeItem('tutorFormData');
          })
          .catch(function(error) {
            console.error('Request sending failed:', error);
            if (loadingSpinner) {
              loadingSpinner.style.display = 'none';
            }
            alert('Failed to send request. Please try again or contact us directly.');
          });
      }

      // Function to show the success modal
      function showSuccessModal() {
        const modal = document.getElementById('successModal');
        if (modal) {
          modal.style.display = 'block';
        }
      }

      // Close the modal when clicking the close button or outside the modal
      window.onclick = function(event) {
        const modal = document.getElementById('successModal');
        if (modal && (event.target == modal || event.target.className == 'custom-modal-close')) {
          modal.style.display = 'none';
        }
      };
    });
  </script>
</body>
</html>